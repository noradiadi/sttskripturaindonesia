<script>
  // Back to Top
  const btn = document.getElementById("backToTop");
  window.onscroll = () => { btn.style.display = window.scrollY > 200 ? "flex" : "none"; };
  btn.onclick = () => window.scrollTo({ top: 0, behavior: "smooth" });

  // Share Button Function
  function shareTo(platform) {
    const pageUrl = encodeURIComponent(window.location.href);
    const pageTitle = encodeURIComponent(document.title);
    let shareUrl = "";

    switch (platform) {
      case "whatsapp":
        shareUrl = `https://wa.me/?text=${pageTitle}%20${pageUrl}`;
        break;
      case "facebook":
        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`;
        break;
      case "twitter":
        shareUrl = `https://twitter.com/intent/tweet?text=${pageTitle}&url=${pageUrl}`;
        break;
      case "copy":
        navigator.clipboard.writeText(window.location.href);
        alert("ðŸ”— Link berita sudah disalin!");
        return;
    }
    window.open(shareUrl, "_blank");
  }

  // Kalender Event
  function renderCalendar() {
    const calendar = document.getElementById("calendar");
    const now = new Date();
    const month = now.toLocaleString("id-ID", { month: "long" });
    const year = now.getFullYear();
    const today = now.getDate();
    const events = {
      "21-8-2025": "Seminar Teologi",
      "23-8-2025": "Wisuda",
      "1-6-2025": "Penerimaan Mahasiswa Baru"
    };
    const dayNames = ["Min","Sen","Sel","Rab","Kam","Jum","Sab"];
    const firstDay = new Date(year, now.getMonth(), 1).getDay();
    const daysInMonth = new Date(year, now.getMonth()+1, 0).getDate();

    let html = `<h6>${month} ${year}</h6><div class="calendar-grid">`;
    dayNames.forEach(d => html += `<div class="day-name">${d}</div>`);
    for (let i=0; i<firstDay; i++) html += `<div></div>`;
    for (let d=1; d<=daysInMonth; d++) {
      let classes = "";
      let dateKey = `${d}-${now.getMonth()+1}-${year}`;
      if (d === today) classes = "today";
      if (events[dateKey]) classes = "event-day";
      html += `<div class="${classes}" data-date="${dateKey}">${d}</div>`;
    }
    html += "</div>";
    calendar.innerHTML = html;

    // Klik tanggal â†’ modal
    document.querySelectorAll("#calendar .calendar-grid div[data-date]").forEach(day => {
      day.addEventListener("click", () => {
        const dateKey = day.getAttribute("data-date");
        const eventModal = new bootstrap.Modal(document.getElementById("eventModal"));
        const eventContent = document.getElementById("eventContent");
        if (events[dateKey]) {
          eventContent.innerHTML = `<p><strong>${events[dateKey]}</strong><br><small>${dateKey}</small></p>`;
        } else {
          eventContent.innerHTML = `<p>Tidak ada acara untuk tanggal <strong>${dateKey}</strong>.</p>`;
        }
        eventModal.show();
      });
    });
  }
  renderCalendar();

  // Search Box aktif
  function searchBerita() {
    const query = document.getElementById("searchInput").value.trim();
    if (query) {
      window.location.href = "hasil-pencarian.html?q=" + encodeURIComponent(query);
    }
    return false;
  }
</script>
